---
title: 04. Атрибутивна таблица
tags: атрибути, бази данни, полета, данни, вектор, симвология
---

# Атрибутивна таблица

## Преглед

Ако всяка линия на картите беше изобразявана със същия цвят, пунктир и дебелина, то картите щяха да са адски скучни, трудни за четене и практически безполезни. Например вижте `figure_map_attributes`{.interpreted-text role="numref"}.

::: {#figure_map_attributes}
![Картите се превръщат в реалност, когато цветове и различни символи се използват, за да се разграничат различни типове обекти. Можете ли да откриете разликите между реките, пътищата и контурите на картата вляво? На картата вдясно това е много по-лесно.](img/map_attributes.png){.align-center width="30em"}
:::

В тази глава ще видим как атрибутите на обектите могат да ни помогнат за направата на интересни карти. В предходната глава относно векторните данни накратко засегнахме, че **атрибутите** се използват, за да представят **описанието на обекти**. Погледнете снимките на къщите във `figure_house`{.interpreted-text role="numref"}.


::: {#figure_house}
![Всеки обект има характеристики, с които може да бъде описан. Това може да са както видими, така и невидими свойства (напр. година на построяване).
](img/house_picture.png){.align-center width="30em"}
:::

Геометриите на тези сгради са полигони (застроената площ), а отбелязаните атрибути са цвят на покрива, наличието на балкон и годината на строеж. Забележете, че атрибутите не включват само видими характеристики. Те могат да опиша и неща, които знаем за обекта като годината на строеж. В ГИС програма можем да представим сградите като векторен слой с полигони houses и следните атрибути в атрибутивната таблица (виж `figure_house_gis`{.interpreted-text role="numref"}).


::: {#figure_house_gis}
![Слоят "houses" със сгради съдържа атрибути, които описват материала на покривите на сградите и други техни свойства. Атрибутивната таблица показва атрибутите за сградите, които са видими на картата. Когато някой от редовете в атрибутивната таблица бъде избран, обектът ще светне в жълто на картата.](img/houses_in_gis.png){.align-center width="30em"}
:::

Комбинацията между атрибути и геометрия в ГИС отваря много възможности за анализ и визуализация. Например стойностите на атрибутите могат да се използват, за да се изисква от ГИС програмата да изрисува обекта по определен начин (виж `figure_style_by_attribute`{.interpreted-text
role="numref"}). Процесът на настройване на цвета и символа, използвани за изобразяване на обектите, се нарича настройване на **символогията** на слоя.

::: {#figure_style_by_attribute}
![В ГИС можем да изрисуваме обектите по различен начин в зависимост от техните атрибути. Вляво къщите са оцветени спрямо вида на покрива им. Вдясно пък спрямо това дали имат балкон или не.](img/style_by_attribute.png){.align-center width="30em"}
:::

Атрибутите са полезни още при поставянето на **етикети** на картата. Повечето ГИС програми имат възможност за избор на атрибут, който да служи за етикет.

Ако някога сте търсили обект на карта по име, знаете колко трудно може да е това. Наличието на атрибут може да направи търсенето бързо и лесно. В
`figure_search_by_attribute`{.interpreted-text role="numref"} може да видите как става такова търсене в QGIS.

::: {#figure_search_by_attribute}
![В ГИС прогамите може да търсите по атрибут. Тук търсим за къщи с керемидени покриви. Резултатите са в синьо-зелено в атрибутивната таблица и жълто на картата.](img/search_by_attribute.png){.align-center width="30em"}
:::


Не на последно място, но атрибутите са изключително ценни при провеждането на **пространствен анализ**. При него се комбинира пространствената и атрибутивната информация на обектите. Това позволява да се изследва как обектите си взаимодействат един с друг.

> Всичко е свързано с всичко останало. Но по-близките обекти са по-свързани, отколкото по-отдалечените обекти.

Първия закон на географията, въведен от Уолдо Р. Тоблер 1969

Има много видове пространствени анализи, например може да потърсите колко керемидени покриви има в даден квартал. Това е важно, ако сте застрахователна компания, защото е определящо за риска при силна градушка. Друг пример е да се открият всички дървета на не повече от 4 метра от пътното платно, предвид предстоящия план за разширение на пътя. Или пък проби с качеството на водата по течението на дадена река и възможността да се изследва как дадено замърсяване се развива. Възможностите са безкрайни! Но ще разгледаме това по-подробно по-късно.

Преди да продължим с атрибутите в повече подробности, нека набързо си пропомним.

Обектите представят реални неща от заобикалящия ни свят - пътища, имоти, електрически стълбове, дървета, тръбопроводи и т.н. Всеки **обект** може да има **геометрия**, което определя дали е **точка**, **линия** или **полигон**, както и **атрибути**, които описват обекта. Това е показано и обяснено в
`figure_features_at_glance`{.interpreted-text role="numref"}.

::: {#figure_features_at_glance}
![Общо поглед над обектите](img/feature_at_glance.png){.align-center
width="30em"}
:::

## Още за атрибутите

Атрибутите на векторен обект се съхраняват в **таблица**. Таблицата е обикновена електронна таблица. Всяка колона в таблицата се нарича **поле**. Всеки ред е **запис**. Таблицата [table\_house\_attributes](#table_house_attributes) показва прост пример как изглежда атрибутивната таблица в ГИС. Всеки запис в атрибутивната таблица съотвества на обект. Обикновено данните от атрибутивната таблица се съхраняват в някакъв вид база данни. ГИС програмите правят връзката между атрибутите и геометрията на обекта, така че може да откривате записи в таблицата като избирате геометрия по картата, както и да откривате геометрия по картата като избирате определен запис от таблицата.

::: {#table_house_attributes}
| записи\атрибути |  поле 1: year_built (година на построяване) | поле 2: roof_material (материал на покрива) | поле 3: has_balcony (наличие на балкон) |
|-----------------|---------------------------------------------|---------------------------------------------|-----------------------------------------|
| запис 1        | 1998                | керемиди                 | да |
| запис 2        | 2000                | бетон               | не |
| запис 3        | 2001                | метал              | да |
:::

Атрибутивната таблица съдържа атрибути (колони) и записи (редове).

Всяко поле в атрибутивната таблица съдържа конкретен тип данни -- текст, число или дата. Изборът какви атрибути да заложим за обектите изисква известно обмисляне и планиране. В нашия пример със сградите избрахме атрибутите - цвят, наличието на балкон и датата на строеж. Със същия успех можеше да изберем други свойства на сградите, като например:

- етажност;
- брой стаи;
- брой обитатели;
- тип на сградата (масивна къща, сглобяема къща, барака, блок и т. н.);
- година на строеж;
- квадратура;
- и т. н.

Как тогава при толкова много възможности да изберем кои ще са подходящите атрибути, за да опишем нашите обекти? Обикновено отговорът се крие в това какво смятаме да правим с данните. Ако искаме да направим цветна карта с възрастта на сградите, то тогава има смисъл да добавим атрибут за годината на строеж. В случай, че сме абсолютно сигурни, че такава карта никога няма да са ни от полза, то тогава няма и смисъл да имаме такъв атрибут. Събирането и съхранението на ненужна информация е лоша идея, предвид усилията вложени в събирането на информацията. Много често векторните данни имат за произход компании, администрации или колеги. В тези случаи нямаме контрол върху това с какви атрибути разполагаме.

## Едноцветна симвология

Обектите са изобразени по много обикновен начин, когато не се използват данни от атрибутивната таблица. Например за точковите обекти може да изберете цвят и маркер (кръг, квадрат, звезда и пр.) и това е. Не може да кажете на QGIS да изобрази обектите на база някое от свойствата им, записани в атрибутивната таблица. За да постигнете това, ще се нуждаете от **категоризирана**, **преливаща** или **уникална стойност** симвология. Те са описани в подробности в следващите секции.


QGIS ще позволи да се настрои симвология чрез **диалогов прозорец**, подобен на показания в :numref:`figure_single_symbol`. Може изберете цветовете и типа на символа. Показаните настройки зависят и от типа на геометрията на слоя. Например за точкови слоеве е наличен избор на **Стил на маркера**. При линии или полигони няма такава настройка, но пък има настройка за **Стил на линията** и цвят, където може да се избере например оранжева пунктирана линия за коларски пътища, непрекъсната оранжева за третокласни пътища и т.н. (виж :numref:`figure_single_symbol_poly`). При слоеве с полигони може да се избере **стил на запълването**.


::: {#figure_single_symbol}
![При работа с прости символи, обектът се изчертава без да се използва атрибут, който да контролира външния му вид. Това е диалогов прозорец за точкови обекти.](img/single_symbol_точка.png){.align-center width="30em"}
:::

::: {#figure_single_symbol_poly}
![Има различни настройки в зависимост дали настройваме символите на обекти с линии или полигони.](img/single_symbol_poly.png){.align-center
width="30em"}
:::

## Симвология с категоризирани цветове

Някои векторни обекти имат атрибути с числова стойност. Изолиниите са добър пример за това. Всяка изолиния обикновено има атрибут `height` (височина) който съдържа информация за надморската височина. По-рано в тази глава показахме изолиниите изрисувани с един и същ цвят. Добавянето на различни цветове може да помогне за по-доброто осъзнаване на смисъла на изолиниите. Например линиите от ниските части могат да са в един цвят, тези от средните части в друг, а тези от високите части - в трети.

::: {#figure_graduated_symbol}
![Атрибутът `height` (височина) на изолиниите може да се използва за създаването на три класа. Изолиниите между 980 m и 1120 m ще са оцветени в кафяво, между 1120 m и 1240 m в зелено, а тези между 1240 m и 1500 m в лилаво.](img/graduated_symbol_settings.png){.align-center
width="30em"}
:::

::: {#figure_graduated_symbol_map}
![Нашата карта след като сме настроили категоризирани цветове на нашите изолинии.](img/graduated_symbol_map.png){.align-center width="30em"}
:::

Настройката на цветовете по групи се нарича категоризирана симвология в QGIS. Процесът е показан на `figure_graduated_symbol`{.interpreted-text role="numref"} и `figure_graduated_symbol_map`{.interpreted-text role="numref"}. **Категоризирани символи** са най-приложими, когато трябва ясно да се покаже разликата между обекитте със стойности на атрибута в различни интервали. QGIS на база стойностите на атрибута и въведения брой категории ще сметне интервалите, на които да ги раздели. Този процес е показан в [table\_graduated](#table_graduated).


::: {#table_graduated}

  | Стойност на атрибута |   Клас      |
  |----------------------|-------------|
  | 1                    | Клас 1      |
  | 2                    | Клас 1      |
  | 3                    | Клас 1      |
  | 4                    | Клас 2      |
  | 5                    | Клас 2      |
  | 6                    | Клас 2      |
  | 7                    | Клас 3      |
  | 8                    | Клас 3      |
  | 9                    | Клас 3      |
:::

Категоризираните цветове разделят стойността на атрибута спрямо зададения брой класове. Всеки клас се представя с различен цвят.


## Симвология с преливащи цветове

Видяхме как да изобразим обектите в отдени групи и класове със символогията **категоризирани цветове**. Понякога е полезно обектите да се изобразят в **преливащи цветове** от един цвят в друг. QGIS ще използва стойността на числов атрибут на обекта (напр. височината на изолинията или нивото на замърсяване на потока), за да определи какъв цвят да използва. В таблицата  [table\_continuous](#table_continuous) показва как стойността на атрибута се използва за определяне на преливащите цветове.


::: {#table_continuous}
| Стойност на атрибута | Цвят (нямаме класове или групиране) |
|----------------------|---------------------------------|
|  1                   | 100% бял                        |
|  2                   | 10% сив                         |
|  3                   | 20% сив                         |
|  4                   | 30% сив                         |
|  5                   | 40% сив                         |
|  6                   | 50% сив                         |
|  7                   | 60% сив                         |
|  8                   | 70% сив                         |
|  9                   | 80% сив                         |
|  10                  | 90% сив                         |
|  11                  | 100% черен                      |
:::

Table Continuous: Continuous colour symbology uses a start colour (e.g.
light orange shown here) and an end colour (e.g. dark brown shown here)
and creates a series of shades between those colours.

Using the same contours example we used in the previous section, let\'s
see how a map with continuous colour symbology is defined and looks. The
process starts by setting the layers properties to continuous colour
using a dialog like the one shown in
`figure_continuous_symbol`{.interpreted-text role="numref"}.

::: {#figure_continuous_symbol}
![Setting up continuous colour symbology. The contour height attribute
is used to determine colour values. Colours are defined for the minimum
and maximum values. The GIS Application will then create a gradient of
colours for drawing the features based on their
heights.](img/continuous_symbol_settings.png){.align-center
width="30em"}
:::

After defining the minimum and maximum colours in the colour range, the
colour features are drawn in will depend on where the attribute lies in
the range between minimum and maximum. For example if you have contour
features with values starting at 1000 m and ending at 1400 m, the value
range is 1000 to 1400. If the colour set for the minimum value is set to
orange and the colour for the maximum value is black, contours with a
value of close to 1400 m will be drawn close to black. On the other hand
contours with a value near to 1000 m will be drawn close to orange (see
`figure_continuous_symbol_map`{.interpreted-text role="numref"}).

::: {#figure_continuous_symbol_map}
![A contour map drawn using continuous colour
symbology](img/continuous_symbol_map.png){.align-center width="30em"}
:::

## Симвология с уникални стойности

Освен визуализацията на числови атрибути, често трябва да комуникираме и атрибути с **текстова** стойност. Често в такива атрибути се съхранява някакъв вид качествен показател. Най-често това е името. Можем да кажем на ГИС програмата за всяка уникална стойност да покаже различна симвология. Например пътищата могат да са с различен цвят, спрямо класа им (напр. магистрала, скоростен път, първокласен път, коларски път и т. н.). Това е показано в
[table\_unique](#table_unique).

::: {#table_unique}
| Атрибут | Цвят и символ |
|---------|---------------|
| магистрала | червен, удебелена линия |
| първокласен път | жълт, средна линия |
| второкласен път | жълт, тънка линия |
| коларски път | кафяв, пунктирана тънка линия |
:::

С уникалните стойности на атрибутите за група обекти (напр. пътища), всяка стойност на атрибута може да има собствен символ.

Within the GIS Application we can open/choose to use Unique Value
symbology for a layer. The GIS will scan through all the different
string values in the attribute field and build a list of unique strings
or numbers. Each unique value can then be assigned a colour and style.
This is shown in `figure_unique_symbol`{.interpreted-text
role="numref"}.

::: {#figure_unique_symbol}
![Defining unique value symbology for roads based on the road
type.](img/unique_symbol_settings.png){.align-center width="30em"}
:::

When the GIS draws the layer, it will look at the attributes of each
feature before drawing it to the screen. Based on the value in the
chosen field in the attribute table, the road line will be drawn with
suitable colour and line style (and fill style if its a polygon
feature). This is shown in `figure_unique_symbol_map`{.interpreted-text
role="numref"}.

::: {#figure_unique_symbol_map}
![Слой с пътища, където всеки тип път е обозначен с уникална симвология.](img/unique_symbol_map.png){.align-center width="30em"}
:::

## Препъникамъчета

Изборът на атрибути и симвология изисква известно планиране. Преди да започне събирането на каквато и да е **геопространствена** информация, трябва да сме сигурни какви атрибути ни представляват интерес и как ще ги изобразим на картата. Доброто планира е ключово, предивд че трудно можем да се върнем и да съберем данните отново. Целта на събирането на данни за обектите не е самоцел, а е необходимо, за да се извърши желания пространствен анализ и да се интерпретира пространствената информация. Какъв точно е този анализ зависи от въпросите, на които искаме да отговорим. Симвология е езикът, с който комуникираме с нашите читатели, затова е важно как атрибутите ще се реализират във визуални елементи. Не бива да подценявате времето и усилията необходими за определяне на символогията на вашата карта.

## Какво научихме?

Да обобщим:

 - Обектите във векторните слоеве имат **атрибути**.
 - Атрибутите **представят** някои от **свойствата** на обектите.
 - Атрибути се съхраняват в **таблица**.
 - Редовете в таблицата се наричат **записи**.
 - Във векторния слой имаме по **един запис за всеки обект**.
 - Колоните на таблицата се наричат **полета**.
 - Полетата представят **свойствата** на обектите, напр. височина, материал на покрива, възраст и др.
 - Полетата могат да съдържат информация под формата на **числа**, **текст** (още известни като низове или стрингове), **дати** и **двоична (булева) стойност**.
 - Атрибутите на даден обект могат да определят какъв **символ** да го изобрази
 - **Категоризираната** симвология групира данните, като разделя всички стойности на избран числов атрибут на избран брой класове.
 - **Преливащата** симвология показва непрекъснато свойство на обектите, изобразено чрез преливането от един цвят към друг.
 - **Уникалната** симвология налага различен цвят за всяка една уникална стойност, налична за дадения атрибут.
 - **едноцветна симвология** описва ситуацията, когато атрибутите не са използвани за определяне на цвета и символа, с който обектът е представен.

## Практика!

Ето някои идеи за упражнения:

- Намислете си различни видове слоеве и помислете за подходяща симвология.
    - Ето примери:

| Обекти | Геометрия | Симвология |
|--------|-----------|------------|
| училища | точка | **Уникална симвология** за всяко училище в района. |
| училища | полигони | **Уникална симвология** за всяко училище в района. |
| улична мрежа | линия | Нека учениците споделят по коя улица поемат, за да се приберат до вкъщи. **Категоризирана симвология** за броят ученици, споделящи един и същи път до дома. |
| улична мрежа | линия | Нека учениците оценят състоянието на улиците около вашето училище, като ги разделят на участъци между две кръстовища и оценят всеки участък от 1 до 10. Използвайте **преливаща симвология**, за да покажете състоянието на уличната мрежа. |
| ученици по класове | полигон | Избройте колко ученици има във всяка класна стая и използвайте цветовете от червено до синьо, за да ги изобразите с **преливащ цвят**. |

- Опитайте се да определите каква симвология е удачно да се използва в следните случаи:
    - точки показващи киселинността (pH) на почвени проби в района на училището;
    - линии показващи уличната мрежа в селището;
    - полигони със сгради и атрибут за материала (тухла, кирпич, бетон и пр.).

Примерна таблица с типа обекти и съответния вид симвология.

## Друга възможност

Ако нямате компютър под ръка, може да използвате палус и карта 1:50000, за да експериментирате с различни видове симвология. Например поставете палуса върху картата и с червен флумастер изобразете всички изолинии под 900 м. н. в. и със зелено всички равни или над 900 м. н. в. Може ли да се опитате да възпроизведете други типове симвология по същия начин?

## Допълнителни материали

**Страница:** <https://en.wikipedia.org/wiki/Cartography>

QGIS ръководството има подобна информация как се работи с атрибутивната таблица и символогията в QGIS.

## Какво следва?

В следващата глава ще разгледаме **създаването на данни**, където на практика ще използваме знанията ни за векторните данни и техните атрибути.